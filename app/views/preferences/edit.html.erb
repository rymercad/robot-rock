<section class="hero">
  <div class="hero-body">
    <h1 class="title">Your Settings</h1>
  </div>
</section>

<section class="section">
  <%= form_with model: @preference, url: preference_path, method: :patch, local: true do |form| %>
    <% if @preference.errors.any? %>
      <div id="error_explanation">
        <h2><%= pluralize(@preference.errors.count, "error") %> prohibited this preference from being saved:</h2>

        <ul>
          <% @preference.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="field is-horizontal">
      <div class="field-label is-normal">
        <%= form.label :musical_tastes, "Music preferences", class: 'label' %>
      </div>
      <div class="field-body">
        <div class="field">
          <div class="control">
            <%= form.text_area :musical_tastes, class: 'textarea' %>
          </div>
          <p class="help">In your own words, explain what kind of music, genres and artists do you like and dislike.</p>
        </div>
      </div>
    </div>

    <div class="field is-horizontal">
      <div class="field-label is-normal">
        <%= form.label :calendar_url, "Calendar URL", class: "label" %>
      </div>
      <div class="field-body">
        <div class="field">
          <p class="control is-expanded has-icons-left">
            <%= form.text_field :calendar_url, class: "input" %>
            <span class="icon is-small is-left">
              <i class="fa-solid fa-globe-pointer"></i>
            </span>
          </p>
          <p class="help">
            Currently supports calendars from TrainerRoad and TrainingPeaks.
          </p>
        </div>
      </div>
    </div>

    <div class="field is-horizontal">
      <div class="field-label is-normal">
        <%= form.label :timezone, "Your time zone", class: "label" %>
      </div>
      <div class="field-body">
        <div class="field">
          <div class="control">
            <div class="select">
              <%= form.time_zone_select :timezone, ActiveSupport::TimeZone.all, { default: @preference.timezone || "UTC" } %>
            </div>
          </div>
        </div>
      </div>
    </div>

    <hr>

    <div class="field is-horizontal">
      <div class="field-label">

      </div>
      <div class="field-body">
        <div class="field is-narrow">
          <div class="control">
            <%= form.label :public_playlists, class: "checkbox" do %>
              <%= form.check_box :public_playlists, class: "checkbox"  %> Make my playlists public
            <% end %>
          </div>
          <p class="help">
            This wonâ€™t affect existing playlists.
          </p>
        </div>
      </div>
    </div>

    <div class="field is-horizontal">
      <div class="field-label">
        
      </div>
      <div class="field-body">
        <div class="field is-narrow">
          <div class="control">
            <%= form.label :automatically_clean_up_old_playlists, class: "checkbox" do %>
              <%= form.check_box :automatically_clean_up_old_playlists, class: "checkbox"  %> Automatically remove older playlists from my Spotify library
            <% end %>
          </div>
        </div>
      </div>
    </div>
    <hr>
    <div class="field is-horizontal">
      <div class="field-label">
        <!-- Left empty for spacing -->
      </div>
      <div class="field-body">
        <div class="field">
          <div class="control">
            <%= form.submit "Save changes", class: "button is-primary" %>
          </div>
        </div>
      </div>
    </div>
  <% end %>
</section>
